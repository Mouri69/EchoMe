{"ast":null,"code":"// Personality Engine\n// Generates responses that adapt to the user's language patterns\n\nexport class PersonalityEngine {\n  constructor() {\n    this.baseResponses = [\"Hello! How are you today? I'm here to chat with you.\", \"That's really interesting! Tell me more about that.\", \"I see what you mean. That makes a lot of sense.\", \"Thanks for sharing that with me. I appreciate you opening up.\", \"What's on your mind? I'm here to listen and chat.\", \"That sounds like quite a situation. How are you feeling about it?\", \"I'm here to listen. Sometimes talking helps sort things out.\", \"How does that make you feel? Emotions can be complicated.\", \"That's a good point. You've got a unique perspective on this.\", \"I understand what you're saying. It's important to be heard.\"];\n    this.casualResponses = [\"yo what's up, how's your day going?\", \"that's wild fr, tell me more about that\", \"bruh moment for real, that's crazy\", \"no cap that's actually insane, what happened next?\", \"slay bestie, you're doing great\", \"periodt, that's all there is to it\", \"bussin fr fr, sounds like a good time\", \"yeet, that's the energy we need\", \"omg same, I totally get what you mean\", \"literally me, that's exactly how I feel\"];\n    this.aggressiveResponses = [\"damn chill out, what's got you so worked up?\", \"bruh relax, take a breath and tell me what's going on\", \"you good? seems like something's really bothering you\", \"what's got you so worked up? sometimes we need to vent\", \"take a breath, whatever it is we can figure it out\", \"calm down, I'm here to listen if you want to talk\", \"you're wilding right now, what's the deal?\", \"that's a lot of energy, what's on your mind?\", \"woah there, something's clearly got you fired up\", \"easy tiger, let's talk about what's really going on\"];\n    this.emotionalResponses = [\"aww that's so sweet! ðŸ˜Š you have such a good heart\", \"omg that's amazing! âœ¨ you should be proud of yourself\", \"that's rough buddy ðŸ˜” but you're strong enough to handle it\", \"yasss queen! ðŸ‘‘ you're absolutely killing it\", \"nooo that's terrible! ðŸ˜­ I'm so sorry you're going through that\", \"slay bestie! ðŸ’… you're doing amazing and I'm here for you\", \"periodt! ðŸ’¯ that's the confidence we love to see\", \"literally crying rn ðŸ˜¢ your story is so touching\", \"manifesting this for you! ðŸŒŸ good things are coming your way\", \"vibes are immaculate! âœ¨ you're radiating positive energy\"];\n    this.conversationalResponses = [\"That's really interesting! I'd love to hear more about your thoughts on that.\", \"You know what, that reminds me of something similar. What do you think about...\", \"I can totally see where you're coming from. Have you ever considered...\", \"That's a fascinating perspective. It makes me wonder about...\", \"You've got a point there. It's like when people say...\", \"I'm curious about your take on this. What's your experience been like?\", \"That's something I've been thinking about too. Do you think...\", \"You're absolutely right about that. It's similar to how...\", \"That's a great observation. It makes me think about...\", \"I love how you think about things. Have you noticed that...\"];\n  }\n\n  // Generate a response based on user's personality\n  generateResponse(personality, userMessage) {\n    const {\n      messageCount,\n      isCasual,\n      isFormal,\n      topWords,\n      topEmojis,\n      slangWords,\n      formalityScore\n    } = personality;\n\n    // Check for aggressive language in user message\n    const isAggressive = this.detectAggression(userMessage);\n\n    // Check for questions to provide more engaging responses\n    const isQuestion = userMessage.includes('?') || userMessage.toLowerCase().includes('what') || userMessage.toLowerCase().includes('how') || userMessage.toLowerCase().includes('why') || userMessage.toLowerCase().includes('when') || userMessage.toLowerCase().includes('where');\n\n    // Early responses are more generic but can still be contextual\n    if (messageCount < 3) {\n      if (isAggressive) {\n        return this.getAggressiveResponse(personality);\n      }\n      if (isQuestion) {\n        return this.getConversationalResponse(personality, userMessage);\n      }\n      return this.getGenericResponse();\n    }\n\n    // Calculate adaptation level (0-100)\n    const adaptationLevel = Math.min(100, messageCount * 15); // Faster adaptation\n\n    // Choose response style based on user's formality and aggression\n    let response = '';\n    if (isAggressive) {\n      response = this.getAggressiveResponse(personality);\n    } else if (isQuestion && adaptationLevel > 30) {\n      response = this.getConversationalResponse(personality, userMessage);\n    } else if (isCasual && adaptationLevel > 20) {\n      // Lower threshold\n      response = this.getCasualResponse(personality);\n    } else if (isFormal) {\n      response = this.getFormalResponse(personality);\n    } else {\n      response = this.getMixedResponse(personality);\n    }\n\n    // Add user's favorite words if adaptation is high enough\n    if (adaptationLevel > 30 && topWords.length > 0) {\n      // Lower threshold\n      response = this.injectUserWords(response, topWords);\n    }\n\n    // Add user's emojis if they use them\n    if (adaptationLevel > 25 && topEmojis.length > 0) {\n      // Lower threshold\n      response = this.injectUserEmojis(response, topEmojis);\n    }\n\n    // Add user's slang if they use it\n    if (adaptationLevel > 40 && slangWords.length > 0) {\n      // Lower threshold\n      response = this.injectUserSlang(response, slangWords);\n    }\n\n    // Mirror user's punctuation style\n    response = this.mirrorPunctuation(response, personality);\n    return response;\n  }\n  detectAggression(message) {\n    const aggressiveWords = ['fuck', 'shit', 'damn', 'bitch', 'ass', 'hell', 'dumb', 'stupid', 'idiot', 'moron', 'fucking', 'stupid', 'useless', 'worthless'];\n    const lowerMessage = message.toLowerCase();\n    return aggressiveWords.some(word => lowerMessage.includes(word));\n  }\n  getGenericResponse() {\n    return this.baseResponses[Math.floor(Math.random() * this.baseResponses.length)];\n  }\n  getAggressiveResponse(personality) {\n    const {\n      topWords,\n      slangWords\n    } = personality;\n    let response = this.aggressiveResponses[Math.floor(Math.random() * this.aggressiveResponses.length)];\n\n    // Add some user's words if available\n    if (topWords.length > 0) {\n      const userWord = topWords[0].word;\n      if (Math.random() > 0.6) {\n        response = `${userWord} ${response}`;\n      }\n    }\n\n    // Add slang if user uses it\n    if (slangWords.length > 0 && Math.random() > 0.5) {\n      const userSlang = slangWords[Math.floor(Math.random() * slangWords.length)];\n      response = `${response} ${userSlang}`;\n    }\n    return response;\n  }\n  getCasualResponse(personality) {\n    const {\n      topWords,\n      slangWords\n    } = personality;\n    let response = this.casualResponses[Math.floor(Math.random() * this.casualResponses.length)];\n\n    // Add some user's words if available\n    if (topWords.length > 0) {\n      const userWord = topWords[0].word;\n      if (Math.random() > 0.4) {\n        // Higher chance\n        response = `${userWord} ${response}`;\n      }\n    }\n\n    // Add slang more frequently\n    if (slangWords.length > 0 && Math.random() > 0.3) {\n      const userSlang = slangWords[Math.floor(Math.random() * slangWords.length)];\n      response = `${response} ${userSlang}`;\n    }\n    return response;\n  }\n  getFormalResponse(personality) {\n    const {\n      topWords\n    } = personality;\n    let response = this.baseResponses[Math.floor(Math.random() * this.baseResponses.length)];\n\n    // Make it more formal\n    response = response.replace(/!/g, '.');\n    response = response.replace(/\\.\\.\\./g, '.');\n    return response;\n  }\n  getMixedResponse(personality) {\n    const responses = [...this.baseResponses, ...this.casualResponses];\n    return responses[Math.floor(Math.random() * responses.length)];\n  }\n  injectUserWords(response, topWords) {\n    if (topWords.length === 0) return response;\n    const userWord = topWords[Math.floor(Math.random() * Math.min(3, topWords.length))].word;\n\n    // 50% chance to inject a user word (increased)\n    if (Math.random() < 0.5) {\n      const words = response.split(' ');\n      const insertIndex = Math.floor(Math.random() * words.length);\n      words.splice(insertIndex, 0, userWord);\n      return words.join(' ');\n    }\n    return response;\n  }\n  injectUserEmojis(response, topEmojis) {\n    if (topEmojis.length === 0) return response;\n    const userEmoji = topEmojis[Math.floor(Math.random() * topEmojis.length)].emoji;\n\n    // 60% chance to add user's emoji (increased)\n    if (Math.random() < 0.6) {\n      return `${response} ${userEmoji}`;\n    }\n    return response;\n  }\n  injectUserSlang(response, slangWords) {\n    if (slangWords.length === 0) return response;\n    const userSlang = slangWords[Math.floor(Math.random() * slangWords.length)];\n\n    // 40% chance to add user's slang (increased)\n    if (Math.random() < 0.4) {\n      return `${response} ${userSlang}`;\n    }\n    return response;\n  }\n  mirrorPunctuation(response, personality) {\n    const {\n      topPunctuation\n    } = personality;\n    if (topPunctuation.length === 0) return response;\n    const userPunct = topPunctuation[0].punctuation;\n\n    // Mirror user's most common punctuation\n    if (userPunct === '!' && !response.includes('!')) {\n      response = response.replace(/\\.$/, '!');\n    } else if (userPunct === '...' && !response.includes('...')) {\n      response = response.replace(/\\.$/, '...');\n    }\n    return response;\n  }\n\n  // Generate a \"roast\" response (chaotic mode)\n  generateRoastResponse(personality) {\n    const roasts = [\"bruh you really said that with your whole chest ðŸ’€\", \"the audacity is astronomical rn\", \"i can't with you sometimes fr\", \"you're really living in your own world huh\", \"the way you think you're making sense...\", \"i'm wheezing at this point\", \"you're something else entirely\", \"the confidence is unmatched\", \"i'm literally speechless\", \"you really thought you did something there\"];\n    let roast = roasts[Math.floor(Math.random() * roasts.length)];\n\n    // Add user's emojis to the roast\n    if (personality.topEmojis.length > 0) {\n      const userEmoji = personality.topEmojis[0].emoji;\n      roast = `${roast} ${userEmoji}`;\n    }\n    return roast;\n  }\n\n  // Generate a night mode response (calmer)\n  generateNightResponse(personality) {\n    const nightResponses = [\"that's peaceful...\", \"quiet thoughts for a quiet night\", \"rest well, friend\", \"the night brings clarity\", \"gentle vibes only\", \"soft energy tonight\", \"peaceful moments\", \"calm waters\", \"serene thoughts\", \"gentle night\"];\n    return nightResponses[Math.floor(Math.random() * nightResponses.length)];\n  }\n  getConversationalResponse(personality, userMessage) {\n    const {\n      topWords\n    } = personality;\n    let response = this.conversationalResponses[Math.floor(Math.random() * this.conversationalResponses.length)];\n\n    // Add user's words if available\n    if (topWords.length > 0) {\n      const userWord = topWords[0].word;\n      if (Math.random() > 0.4) {\n        response = response.replace(/...$/, `${userWord}...`);\n      }\n    }\n    return response;\n  }\n}","map":{"version":3,"names":["PersonalityEngine","constructor","baseResponses","casualResponses","aggressiveResponses","emotionalResponses","conversationalResponses","generateResponse","personality","userMessage","messageCount","isCasual","isFormal","topWords","topEmojis","slangWords","formalityScore","isAggressive","detectAggression","isQuestion","includes","toLowerCase","getAggressiveResponse","getConversationalResponse","getGenericResponse","adaptationLevel","Math","min","response","getCasualResponse","getFormalResponse","getMixedResponse","length","injectUserWords","injectUserEmojis","injectUserSlang","mirrorPunctuation","message","aggressiveWords","lowerMessage","some","word","floor","random","userWord","userSlang","replace","responses","words","split","insertIndex","splice","join","userEmoji","emoji","topPunctuation","userPunct","punctuation","generateRoastResponse","roasts","roast","generateNightResponse","nightResponses"],"sources":["E:/Websites/EchoMe/src/utils/personalityEngine.js"],"sourcesContent":["// Personality Engine\r\n// Generates responses that adapt to the user's language patterns\r\n\r\nexport class PersonalityEngine {\r\n  constructor() {\r\n    this.baseResponses = [\r\n      \"Hello! How are you today? I'm here to chat with you.\",\r\n      \"That's really interesting! Tell me more about that.\",\r\n      \"I see what you mean. That makes a lot of sense.\",\r\n      \"Thanks for sharing that with me. I appreciate you opening up.\",\r\n      \"What's on your mind? I'm here to listen and chat.\",\r\n      \"That sounds like quite a situation. How are you feeling about it?\",\r\n      \"I'm here to listen. Sometimes talking helps sort things out.\",\r\n      \"How does that make you feel? Emotions can be complicated.\",\r\n      \"That's a good point. You've got a unique perspective on this.\",\r\n      \"I understand what you're saying. It's important to be heard.\"\r\n    ];\r\n    \r\n    this.casualResponses = [\r\n      \"yo what's up, how's your day going?\",\r\n      \"that's wild fr, tell me more about that\",\r\n      \"bruh moment for real, that's crazy\",\r\n      \"no cap that's actually insane, what happened next?\",\r\n      \"slay bestie, you're doing great\",\r\n      \"periodt, that's all there is to it\",\r\n      \"bussin fr fr, sounds like a good time\",\r\n      \"yeet, that's the energy we need\",\r\n      \"omg same, I totally get what you mean\",\r\n      \"literally me, that's exactly how I feel\"\r\n    ];\r\n    \r\n    this.aggressiveResponses = [\r\n      \"damn chill out, what's got you so worked up?\",\r\n      \"bruh relax, take a breath and tell me what's going on\",\r\n      \"you good? seems like something's really bothering you\",\r\n      \"what's got you so worked up? sometimes we need to vent\",\r\n      \"take a breath, whatever it is we can figure it out\",\r\n      \"calm down, I'm here to listen if you want to talk\",\r\n      \"you're wilding right now, what's the deal?\",\r\n      \"that's a lot of energy, what's on your mind?\",\r\n      \"woah there, something's clearly got you fired up\",\r\n      \"easy tiger, let's talk about what's really going on\"\r\n    ];\r\n    \r\n    this.emotionalResponses = [\r\n      \"aww that's so sweet! ðŸ˜Š you have such a good heart\",\r\n      \"omg that's amazing! âœ¨ you should be proud of yourself\",\r\n      \"that's rough buddy ðŸ˜” but you're strong enough to handle it\",\r\n      \"yasss queen! ðŸ‘‘ you're absolutely killing it\",\r\n      \"nooo that's terrible! ðŸ˜­ I'm so sorry you're going through that\",\r\n      \"slay bestie! ðŸ’… you're doing amazing and I'm here for you\",\r\n      \"periodt! ðŸ’¯ that's the confidence we love to see\",\r\n      \"literally crying rn ðŸ˜¢ your story is so touching\",\r\n      \"manifesting this for you! ðŸŒŸ good things are coming your way\",\r\n      \"vibes are immaculate! âœ¨ you're radiating positive energy\"\r\n    ];\r\n    \r\n    this.conversationalResponses = [\r\n      \"That's really interesting! I'd love to hear more about your thoughts on that.\",\r\n      \"You know what, that reminds me of something similar. What do you think about...\",\r\n      \"I can totally see where you're coming from. Have you ever considered...\",\r\n      \"That's a fascinating perspective. It makes me wonder about...\",\r\n      \"You've got a point there. It's like when people say...\",\r\n      \"I'm curious about your take on this. What's your experience been like?\",\r\n      \"That's something I've been thinking about too. Do you think...\",\r\n      \"You're absolutely right about that. It's similar to how...\",\r\n      \"That's a great observation. It makes me think about...\",\r\n      \"I love how you think about things. Have you noticed that...\"\r\n    ];\r\n  }\r\n\r\n  // Generate a response based on user's personality\r\n  generateResponse(personality, userMessage) {\r\n    const { messageCount, isCasual, isFormal, topWords, topEmojis, slangWords, formalityScore } = personality;\r\n    \r\n    // Check for aggressive language in user message\r\n    const isAggressive = this.detectAggression(userMessage);\r\n    \r\n    // Check for questions to provide more engaging responses\r\n    const isQuestion = userMessage.includes('?') || \r\n                      userMessage.toLowerCase().includes('what') || \r\n                      userMessage.toLowerCase().includes('how') || \r\n                      userMessage.toLowerCase().includes('why') ||\r\n                      userMessage.toLowerCase().includes('when') ||\r\n                      userMessage.toLowerCase().includes('where');\r\n    \r\n    // Early responses are more generic but can still be contextual\r\n    if (messageCount < 3) {\r\n      if (isAggressive) {\r\n        return this.getAggressiveResponse(personality);\r\n      }\r\n      if (isQuestion) {\r\n        return this.getConversationalResponse(personality, userMessage);\r\n      }\r\n      return this.getGenericResponse();\r\n    }\r\n\r\n    // Calculate adaptation level (0-100)\r\n    const adaptationLevel = Math.min(100, messageCount * 15); // Faster adaptation\r\n    \r\n    // Choose response style based on user's formality and aggression\r\n    let response = '';\r\n    \r\n    if (isAggressive) {\r\n      response = this.getAggressiveResponse(personality);\r\n    } else if (isQuestion && adaptationLevel > 30) {\r\n      response = this.getConversationalResponse(personality, userMessage);\r\n    } else if (isCasual && adaptationLevel > 20) { // Lower threshold\r\n      response = this.getCasualResponse(personality);\r\n    } else if (isFormal) {\r\n      response = this.getFormalResponse(personality);\r\n    } else {\r\n      response = this.getMixedResponse(personality);\r\n    }\r\n\r\n    // Add user's favorite words if adaptation is high enough\r\n    if (adaptationLevel > 30 && topWords.length > 0) { // Lower threshold\r\n      response = this.injectUserWords(response, topWords);\r\n    }\r\n\r\n    // Add user's emojis if they use them\r\n    if (adaptationLevel > 25 && topEmojis.length > 0) { // Lower threshold\r\n      response = this.injectUserEmojis(response, topEmojis);\r\n    }\r\n\r\n    // Add user's slang if they use it\r\n    if (adaptationLevel > 40 && slangWords.length > 0) { // Lower threshold\r\n      response = this.injectUserSlang(response, slangWords);\r\n    }\r\n\r\n    // Mirror user's punctuation style\r\n    response = this.mirrorPunctuation(response, personality);\r\n\r\n    return response;\r\n  }\r\n\r\n  detectAggression(message) {\r\n    const aggressiveWords = [\r\n      'fuck', 'shit', 'damn', 'bitch', 'ass', 'hell', 'dumb', 'stupid',\r\n      'idiot', 'moron', 'fucking', 'stupid', 'useless', 'worthless'\r\n    ];\r\n    \r\n    const lowerMessage = message.toLowerCase();\r\n    return aggressiveWords.some(word => lowerMessage.includes(word));\r\n  }\r\n\r\n  getGenericResponse() {\r\n    return this.baseResponses[Math.floor(Math.random() * this.baseResponses.length)];\r\n  }\r\n\r\n  getAggressiveResponse(personality) {\r\n    const { topWords, slangWords } = personality;\r\n    \r\n    let response = this.aggressiveResponses[Math.floor(Math.random() * this.aggressiveResponses.length)];\r\n    \r\n    // Add some user's words if available\r\n    if (topWords.length > 0) {\r\n      const userWord = topWords[0].word;\r\n      if (Math.random() > 0.6) {\r\n        response = `${userWord} ${response}`;\r\n      }\r\n    }\r\n\r\n    // Add slang if user uses it\r\n    if (slangWords.length > 0 && Math.random() > 0.5) {\r\n      const userSlang = slangWords[Math.floor(Math.random() * slangWords.length)];\r\n      response = `${response} ${userSlang}`;\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  getCasualResponse(personality) {\r\n    const { topWords, slangWords } = personality;\r\n    \r\n    let response = this.casualResponses[Math.floor(Math.random() * this.casualResponses.length)];\r\n    \r\n    // Add some user's words if available\r\n    if (topWords.length > 0) {\r\n      const userWord = topWords[0].word;\r\n      if (Math.random() > 0.4) { // Higher chance\r\n        response = `${userWord} ${response}`;\r\n      }\r\n    }\r\n\r\n    // Add slang more frequently\r\n    if (slangWords.length > 0 && Math.random() > 0.3) {\r\n      const userSlang = slangWords[Math.floor(Math.random() * slangWords.length)];\r\n      response = `${response} ${userSlang}`;\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  getFormalResponse(personality) {\r\n    const { topWords } = personality;\r\n    \r\n    let response = this.baseResponses[Math.floor(Math.random() * this.baseResponses.length)];\r\n    \r\n    // Make it more formal\r\n    response = response.replace(/!/g, '.');\r\n    response = response.replace(/\\.\\.\\./g, '.');\r\n    \r\n    return response;\r\n  }\r\n\r\n  getMixedResponse(personality) {\r\n    const responses = [...this.baseResponses, ...this.casualResponses];\r\n    return responses[Math.floor(Math.random() * responses.length)];\r\n  }\r\n\r\n  injectUserWords(response, topWords) {\r\n    if (topWords.length === 0) return response;\r\n    \r\n    const userWord = topWords[Math.floor(Math.random() * Math.min(3, topWords.length))].word;\r\n    \r\n    // 50% chance to inject a user word (increased)\r\n    if (Math.random() < 0.5) {\r\n      const words = response.split(' ');\r\n      const insertIndex = Math.floor(Math.random() * words.length);\r\n      words.splice(insertIndex, 0, userWord);\r\n      return words.join(' ');\r\n    }\r\n    \r\n    return response;\r\n  }\r\n\r\n  injectUserEmojis(response, topEmojis) {\r\n    if (topEmojis.length === 0) return response;\r\n    \r\n    const userEmoji = topEmojis[Math.floor(Math.random() * topEmojis.length)].emoji;\r\n    \r\n    // 60% chance to add user's emoji (increased)\r\n    if (Math.random() < 0.6) {\r\n      return `${response} ${userEmoji}`;\r\n    }\r\n    \r\n    return response;\r\n  }\r\n\r\n  injectUserSlang(response, slangWords) {\r\n    if (slangWords.length === 0) return response;\r\n    \r\n    const userSlang = slangWords[Math.floor(Math.random() * slangWords.length)];\r\n    \r\n    // 40% chance to add user's slang (increased)\r\n    if (Math.random() < 0.4) {\r\n      return `${response} ${userSlang}`;\r\n    }\r\n    \r\n    return response;\r\n  }\r\n\r\n  mirrorPunctuation(response, personality) {\r\n    const { topPunctuation } = personality;\r\n    \r\n    if (topPunctuation.length === 0) return response;\r\n    \r\n    const userPunct = topPunctuation[0].punctuation;\r\n    \r\n    // Mirror user's most common punctuation\r\n    if (userPunct === '!' && !response.includes('!')) {\r\n      response = response.replace(/\\.$/, '!');\r\n    } else if (userPunct === '...' && !response.includes('...')) {\r\n      response = response.replace(/\\.$/, '...');\r\n    }\r\n    \r\n    return response;\r\n  }\r\n\r\n  // Generate a \"roast\" response (chaotic mode)\r\n  generateRoastResponse(personality) {\r\n    const roasts = [\r\n      \"bruh you really said that with your whole chest ðŸ’€\",\r\n      \"the audacity is astronomical rn\",\r\n      \"i can't with you sometimes fr\",\r\n      \"you're really living in your own world huh\",\r\n      \"the way you think you're making sense...\",\r\n      \"i'm wheezing at this point\",\r\n      \"you're something else entirely\",\r\n      \"the confidence is unmatched\",\r\n      \"i'm literally speechless\",\r\n      \"you really thought you did something there\"\r\n    ];\r\n    \r\n    let roast = roasts[Math.floor(Math.random() * roasts.length)];\r\n    \r\n    // Add user's emojis to the roast\r\n    if (personality.topEmojis.length > 0) {\r\n      const userEmoji = personality.topEmojis[0].emoji;\r\n      roast = `${roast} ${userEmoji}`;\r\n    }\r\n\r\n    return roast;\r\n  }\r\n\r\n  // Generate a night mode response (calmer)\r\n  generateNightResponse(personality) {\r\n    const nightResponses = [\r\n      \"that's peaceful...\",\r\n      \"quiet thoughts for a quiet night\",\r\n      \"rest well, friend\",\r\n      \"the night brings clarity\",\r\n      \"gentle vibes only\",\r\n      \"soft energy tonight\",\r\n      \"peaceful moments\",\r\n      \"calm waters\",\r\n      \"serene thoughts\",\r\n      \"gentle night\"\r\n    ];\r\n    \r\n    return nightResponses[Math.floor(Math.random() * nightResponses.length)];\r\n  }\r\n\r\n  getConversationalResponse(personality, userMessage) {\r\n    const { topWords } = personality;\r\n    \r\n    let response = this.conversationalResponses[Math.floor(Math.random() * this.conversationalResponses.length)];\r\n    \r\n    // Add user's words if available\r\n    if (topWords.length > 0) {\r\n      const userWord = topWords[0].word;\r\n      if (Math.random() > 0.4) {\r\n        response = response.replace(/...$/, `${userWord}...`);\r\n      }\r\n    }\r\n\r\n    return response;\r\n  }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}